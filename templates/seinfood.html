<!DOCTYPE html>
<html>
    <head>
        <title>Seinfeld Local Cuisine</title>
        <style>
            #map {
                height: 400px;
                width: 100%;
                background-color: grey;
            }
          </style>
          <script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
    </head>

    <header class="subpage-header">
        <h1>Seinfeld Food Locator</h1>
    </header>

    <body>
        <nav class="nav-bar">
            <ol>
                <li><a href="/">Home Page</a></li>
                <li><a href="/character-chat">Character Bot</a></li>
                <li><a href="/where-are-they-now">Where Are They Now?</a></li>
                <li><a href="/food-locator">SeinFood Locator</a></li>
                <li><a href="/festivus">Festivus Countdown</a></li>
            </ol>
        </nav>


        <div class="page-description">
            <p>The show Seinfeld often uses food as a plot device. Sometimes the 
                foods sound tasty, or maybe the show is the first time you're hearing
                about this type of thing. Use the local search to see where cuisine
                and items mentioned on the show are available near you.</p>
        </div>

        <div class="food-locate-form">
            <h3>Dine Like the Characters!</h3>
            <form action="/zip-code">
                <label name="your-zip-code">Your zip code: </label>
                <input type="text" id="zip-code" name="zip-code" pattern="[0-9]{5,5}" maxlength="5">
                <text name="zip-user-input" id="zip-user-input"></text>
                        
                <p><em>* 10 mile radius</em></p><br>
                <input type="submit" value="submit" id="zip-button">
                <br>
                <br>
            </form>
        </div>
        {% if zip_code_search %}
        <div class="food-results">
            <h2>Places: </h2>
            <ul>
               
            {% for key, value in dict_of_businesses.items() %}
                <li>{{ key[0] }}: {{ value[0] }} {{ value[1][0] }}, {{ value[1][1] }}</li>
            {% endfor %}
        
            </ul>
        </div>
        {% endif %}
    </body>

    <div id="map">
    </div>
    <script type="text/javascript">
    // var url = window.location.href;
        const latLng = {{ business_lat_lng | tojson }}
        // console.log(`wtf is this ${wtfIsThis}`)
    // if (url.includes("zip-code")) {
    //     console.log("1 HELLO")

    // // take the last 5 chars from the url because they are the zip code
    //     var zipCode = url.slice(-5);
    //     let myRequest = new Request('https://maps.googleapis.com/maps/api/geocode/json?address='+ zipCode +'&key=AIzaSyBN7Ys5b4G0wm80VPUD8FlMsMHexHG9LdU');
    //         console.log("2", zipCode)
    //         const myRequestUrl = myRequest.url
    //         fetch(myRequestUrl)
    //             .then(function(response) { 
    //                 console.log("3 I'm in the first then, respnse is ", response)
    //                 return response.json(); 
    //             })
    //             // console.log("4 JSON", response.json())
    //             .then(function(jsonData) {
    //                 console.log({jsonData})
    //                 // Create an empty array. This will hold the berry names
    //                 const businessesArray = []
                    
    //                 // Iterate over the dictionary results, which is list
    //                 // of entry dictionaries. Each entry will look like:
    //                 //   {name: "cheri", url: "https://pokeapi.co/api/v2/berry/1/"} 
    //                 for (entry of jsonData.results) {
    //                     // Get the berry name from the dictionary
    //                     const business = businesses.name;
                        
    //                     // Add the berry name to our array
    //                     businessesArray.push(business);
    //                 }
                    
    //                 // Join the elements into the berry array into a single string
    //                 const businessString = businessesArray.join(', ');
                    
    //                 // Get the paragraph we should replace with berry names
    //                 const businessParagraph = document.getElementById("businesses-from-js-request");
    //                 businessParagraph.innerText = businessString;
                    
    //             });
    //         };



    </script>


        <script type="text/javascript" src="static/js/sein_maps.js"></script>
        <script async defer
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBN7Ys5b4G0wm80VPUD8FlMsMHexHG9LdU&callback=initMap">
        </script>
</html>